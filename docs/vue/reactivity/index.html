<!doctype html><html lang=zh-hans dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-vue/reactivity" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>å“åº”å¼ | web-interview</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://blog.zenheart.site/web-interview/docs/vue/reactivity><meta data-rh=true property=og:locale content=zh_hans><meta data-rh=true name=docusaurus_locale content=zh-hans><meta data-rh=true name=docsearch:language content=zh-hans><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="å“åº”å¼ | web-interview"><meta data-rh=true name=description content="vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœ"><meta data-rh=true property=og:description content="vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœ"><link data-rh=true rel=canonical href=https://blog.zenheart.site/web-interview/docs/vue/reactivity><link data-rh=true rel=alternate href=https://blog.zenheart.site/web-interview/docs/vue/reactivity hreflang=zh-hans><link data-rh=true rel=alternate href=https://blog.zenheart.site/web-interview/docs/vue/reactivity hreflang=x-default><link rel=stylesheet href=/web-interview/assets/css/styles.d80416ed.css><script src=/web-interview/assets/js/runtime~main.3fc33434.js defer></script><script src=/web-interview/assets/js/main.1a00b813.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=è·³åˆ°ä¸»è¦å†…å®¹><a class=skipToContent_Bmn5 href=#__docusaurus_skipToContent_fallback>è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label=ä¸»å¯¼èˆª class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=åˆ‡æ¢å¯¼èˆªæ  aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/web-interview/><b class="navbar__title text--truncate">web interview</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/web-interview/docs/js/type>questions</a><a class="navbar__item navbar__link" href=/web-interview/contributors/>contributors</a><a class="navbar__item navbar__link" href=/web-interview/company/>company</a><a class="navbar__item navbar__link" href=/web-interview/reference>reference</a><a class="navbar__item navbar__link" href=/web-interview/kanban>kanban</a></div><div class="navbar__items navbar__items--right"><a href=https://github.com/zenHeart/web-interview target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_TfAQ><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_chIG colorModeToggle_FKbV"><button class="clean-btn toggleButton_PPGN toggleButtonDisabled_OzN_" type=button disabled title=åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰ aria-label=åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰ aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_Rs0N><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_Cgc7><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_S3Xx></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_zlUw"><div class=docsWrapper_jIwN><button aria-label=å›åˆ°é¡¶éƒ¨ class="clean-btn theme-back-to-top-button backToTopButton_t3lV" type=button></button><div class=docRoot_PaRY><aside class="theme-doc-sidebar-container docSidebarContainer_Hwg5"><div class=sidebarViewport_qDlF><div class=sidebar_Ab13><nav aria-label=æ–‡æ¡£ä¾§è¾¹æ  class="menu thin-scrollbar menu_xdzH"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/js/type>js</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/html/attributes>html</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/css/concept>css</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/node/api>node</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/react/component>react</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/web-interview/docs/vue/component>vue</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/web-interview/docs/vue/component>ç»„ä»¶</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/web-interview/docs/vue/reactivity>å“åº”å¼</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/web-interview/docs/vue/tool>å·¥å…·é“¾</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/web-interview/docs/vue/theory>åŸç†</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/web-interview/docs/vue/coding>ç¼–ç é¢˜</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/hybird/rn>hybird</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/engineering/concept>engineering</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/algorithm/complex-analysis>algorithm</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/network/concept>network</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/operate-system/index>operate-system</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/web-interview/docs/interview/index>interview</a></div></ul></nav></div></div></aside><main class=docMainContainer__Bu4><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_nx5b"><div class=docItemContainer_G9IQ><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_FrWe" aria-label=é¡µé¢è·¯å¾„><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=ä¸»é¡µé¢ class=breadcrumbs__link href=/web-interview/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_whcU><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>vue</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>å“åº”å¼</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_sgzh theme-doc-toc-mobile tocMobile_wRIx"><button type=button class="clean-btn tocCollapsibleButton_rCmu">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>å“åº”å¼</h1></header>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p0-vue3-reactivity>vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœ<a href=#p0-vue3-reactivity class=hash-link aria-label="vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœçš„ç›´æ¥é“¾æ¥" title="vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è¯¥è¯é¢˜æ¶‰åŠçš„ç›¸å…³å†…å®¹</p>
<ul>
<li>åŸç†ï¼šProxyã€trackã€trigger</li>
<li>æ–°å¢å±æ€§</li>
<li>éå†åæ–°å¢</li>
<li>éå†ååˆ é™¤æˆ–è€…æ¸…ç©º</li>
<li>è·å– keys</li>
<li>åˆ é™¤å¯¹è±¡å±æ€§</li>
<li>åˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨</li>
<li>æ€§èƒ½</li>
</ul>
<p>æ¨èé˜…è¯»æ–‡æ¡£ï¼š <a href=https://juejin.cn/post/6844904122479542285 target=_blank rel="noopener noreferrer">èµ„æ–™</a></p>
<p>å“åº”å¼ä»“åº“</p>
<p>Vue3 ä¸åŒäº Vue2 ä¹Ÿä½“ç°åœ¨æºç ç»“æ„ä¸Šï¼ŒVue3 æŠŠè€¦åˆæ€§æ¯”è¾ƒä½çš„åŒ…åˆ†æ•£åœ¨ <code>packages</code> ç›®å½•ä¸‹å•ç‹¬å‘å¸ƒæˆ <code>npm</code> åŒ…ã€‚ è¿™ä¹Ÿæ˜¯ç›®å‰å¾ˆæµè¡Œçš„ä¸€ç§å¤§å‹é¡¹ç›®ç®¡ç†æ–¹å¼ <code>Monorepo</code>ã€‚</p>
<p>å…¶ä¸­è´Ÿè´£å“åº”å¼éƒ¨åˆ†çš„ä»“åº“å°±æ˜¯ <code>@vue/reactivity</code>ï¼Œå®ƒä¸æ¶‰åŠ Vue çš„å…¶ä»–çš„ä»»ä½•éƒ¨åˆ†ï¼Œæ˜¯éå¸¸éå¸¸ ã€Œæ­£äº¤ã€ çš„ä¸€ç§å®ç°æ–¹å¼ã€‚</p>
<p>ç”šè‡³å¯ä»¥<code>è½»æ¾çš„é›†æˆè¿› React</code> <a href=https://juejin.cn/post/6844904095594381325 target=_blank rel="noopener noreferrer">èµ„æ–™</a></p>
<p>åŒºåˆ«</p>
<p>Proxy å’Œ Object.defineProperty çš„ä½¿ç”¨æ–¹æ³•çœ‹ä¼¼å¾ˆç›¸ä¼¼ï¼Œå…¶å® Proxy æ˜¯åœ¨ ã€Œæ›´é«˜ç»´åº¦ã€ ä¸Šå»æ‹¦æˆªå±æ€§çš„ä¿®æ”¹çš„ï¼Œæ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p>
<p>Vue2 ä¸­ï¼Œå¯¹äºç»™å®šçš„ dataï¼Œå¦‚ <code>{ count: 1 }</code>ï¼Œæ˜¯éœ€è¦æ ¹æ®å…·ä½“çš„ key ä¹Ÿå°±æ˜¯ <code>count</code>ï¼Œå»å¯¹ã€Œä¿®æ”¹ data.count ã€ å’Œ ã€Œè¯»å– data.countã€è¿›è¡Œæ‹¦æˆªï¼Œä¹Ÿå°±æ˜¯</p>
<div class="language-jsx codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-jsx codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>defineProperty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'count'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// eslint-disbale-next-line</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// nop</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å¿…é¡»é¢„å…ˆçŸ¥é“è¦æ‹¦æˆªçš„ key æ˜¯ä»€ä¹ˆï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Vue2 é‡Œå¯¹äºå¯¹è±¡ä¸Šçš„æ–°å¢å±æ€§æ— èƒ½ä¸ºåŠ›ã€‚</p>
<p>è€Œ Vue3 æ‰€ä½¿ç”¨çš„ Proxyï¼Œåˆ™æ˜¯è¿™æ ·æ‹¦æˆªçš„ï¼š</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> p </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Proxy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ ¹æœ¬ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„ keyï¼Œå®ƒå»æ‹¦æˆªçš„æ˜¯ ã€Œä¿®æ”¹ data ä¸Šçš„ä»»æ„ keyã€ å’Œ ã€Œè¯»å– data ä¸Šçš„ä»»æ„ keyã€ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯å·²æœ‰çš„ key è¿˜æ˜¯æ–°å¢çš„ keyï¼Œéƒ½é€ƒä¸è¿‡å®ƒçš„é­”çˆªã€‚</p>
<p>ä½†æ˜¯ Proxy æ›´åŠ å¼ºå¤§çš„åœ°æ–¹è¿˜åœ¨äº Proxy é™¤äº† get å’Œ setï¼Œè¿˜å¯ä»¥æ‹¦æˆªæ›´å¤šçš„æ“ä½œç¬¦ã€‚</p>
<p>ç®€å•çš„ä¾‹å­ğŸŒ°</p>
<p>å…ˆå†™ä¸€ä¸ª Vue3 å“åº”å¼çš„æœ€å°æ¡ˆä¾‹ï¼Œæœ¬æ–‡çš„ç›¸å…³æ¡ˆä¾‹éƒ½åªä¼šç”¨ <code>reactive</code> å’Œ <code>effect</code> è¿™ä¸¤ä¸ª apiã€‚å¦‚æœä½ äº†è§£è¿‡ React ä¸­çš„ <code>useEffect</code>ï¼Œç›¸ä¿¡ä½ ä¼šå¯¹è¿™ä¸ªæ¦‚å¿µç§’æ‡‚ï¼ŒVue3 çš„ <code>effect</code> ä¸è¿‡å°±æ˜¯å»æ‰äº†æ‰‹åŠ¨å£°æ˜ä¾èµ–çš„ã€Œè¿›åŒ–ç‰ˆã€çš„ <code>useEffect</code>ã€‚</p>
<p>React ä¸­æ‰‹åŠ¨å£°æ˜ <code>[data.count]</code> è¿™ä¸ªä¾èµ–çš„æ­¥éª¤è¢« Vue3 å†…éƒ¨ç›´æ¥åšæ‰äº†ï¼Œåœ¨ <code>effect</code> å‡½æ•°å†…éƒ¨è¯»å–åˆ° <code>data.count</code> çš„æ—¶å€™ï¼Œå®ƒå°±å·²ç»è¢«æ”¶é›†ä½œä¸ºä¾èµ–äº†ã€‚</p>
<p>Vue3ï¼š</p>
<div class="language-kotlin codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-kotlin codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// å“åº”å¼æ•°æ®</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>data</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// è§‚æµ‹å˜åŒ–</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>effect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">'count changed'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">count</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘ console.log('count changed', data.count) é‡æ–°æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">count </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Reactï¼š</p>
<div class="language-scss codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-scss codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">// æ•°æ®</span><br></span><span class=token-line style=color:#393A34><span class="token plain">const [data, setData] = useState({</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> count: 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">})</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// è§‚æµ‹å˜åŒ– éœ€è¦æ‰‹åŠ¨å£°æ˜ä¾èµ–</span><br></span><span class=token-line style=color:#393A34><span class="token plain">useEffect(() => {</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> console.log('count changed', data.count)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}, [data.count])</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// è§¦å‘ console.log('count changed', data.count) é‡æ–°æ‰§è¡Œ</span><br></span><span class=token-line style=color:#393A34><span class="token plain">setData({</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> count: 2</span><br></span><span class=token-line style=color:#393A34><span class="token plain">})</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ä¹Ÿå¯ä»¥æŠŠ <code>effect</code> ä¸­çš„å›è°ƒå‡½æ•°è”æƒ³åˆ°è§†å›¾çš„é‡æ–°æ¸²æŸ“ã€ watch çš„å›è°ƒå‡½æ•°ç­‰ç­‰â€¦â€¦ å®ƒä»¬æ˜¯åŒæ ·åŸºäºè¿™å¥—å“åº”å¼æœºåˆ¶çš„ã€‚</p>
<p>è€Œæœ¬æ–‡çš„æ ¸å¿ƒç›®çš„ï¼Œå°±æ˜¯æ¢ç©¶è¿™ä¸ªåŸºäº Proxy çš„ reactive apiï¼Œåˆ°åº•èƒ½å¼ºå¤§åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œèƒ½ç›‘å¬åˆ°ç”¨æˆ·å¯¹äºä»€ä¹ˆç¨‹åº¦çš„ä¿®æ”¹ã€‚</p>
<p>è®²è®²åŸç†</p>
<p>å…ˆæœ€å°åŒ–çš„è®²è§£ä¸€ä¸‹å“åº”å¼çš„åŸç†ï¼Œå…¶å®å°±æ˜¯åœ¨ Proxy ç¬¬äºŒä¸ªå‚æ•° <code>handler</code> ä¹Ÿå°±æ˜¯é™·é˜±æ“ä½œç¬¦ä¸­ï¼Œæ‹¦æˆªå„ç§å–å€¼ã€èµ‹å€¼æ“ä½œï¼Œä¾æ‰˜ <code>track</code> å’Œ <code>trigger</code> ä¸¤ä¸ªå‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°ã€‚</p>
<p><code>track</code> ç”¨æ¥åœ¨è¯»å–æ—¶æ”¶é›†ä¾èµ–ã€‚</p>
<p><code>trigger</code> ç”¨æ¥åœ¨æ›´æ–°æ—¶è§¦å‘ä¾èµ–ã€‚</p>
<p>track</p>
<div class="language-vbnet codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-vbnet codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">function track(target: object, type: TrackOpTypes, key: unknown) {</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> const depsMap = targetMap.get(target);</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> // æ”¶é›†ä¾èµ–æ—¶ é€šè¿‡ key å»ºç«‹ä¸€ä¸ª set</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> let dep = new Set()</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> targetMap.set(ITERATE_KEY, dep)</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> // è¿™ä¸ª effect å¯ä»¥å…ˆç†è§£ä¸ºæ›´æ–°å‡½æ•° å­˜æ”¾åœ¨ dep é‡Œ</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> dep.add(effect)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>target</code> æ˜¯åŸå¯¹è±¡ã€‚</p>
<p><code>type</code> æ˜¯æœ¬æ¬¡æ”¶é›†çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ”¶é›†ä¾èµ–çš„æ—¶å€™ç”¨æ¥æ ‡è¯†æ˜¯ä»€ä¹ˆç±»å‹çš„æ“ä½œï¼Œæ¯”å¦‚ä¸Šæ–‡ä¾èµ–ä¸­çš„ç±»å‹å°±æ˜¯ <code>get</code>ï¼Œè¿™ä¸ªåç»­ä¼šè¯¦ç»†è®²è§£ã€‚</p>
<p><code>key</code> æ˜¯æŒ‡æœ¬æ¬¡è®¿é—®çš„æ˜¯æ•°æ®ä¸­çš„å“ªä¸ª keyï¼Œæ¯”å¦‚ä¸Šæ–‡ä¾‹å­ä¸­æ”¶é›†ä¾èµ–çš„ key å°±æ˜¯ <code>count</code></p>
<p>é¦–å…ˆå…¨å±€ä¼šå­˜åœ¨ä¸€ä¸ª <code>targetMap</code>ï¼Œå®ƒç”¨æ¥å»ºç«‹ <code>æ•°æ® -> ä¾èµ–</code> çš„æ˜ å°„ï¼Œå®ƒæ˜¯ä¸€ä¸ª WeakMap æ•°æ®ç»“æ„ã€‚</p>
<p>è€Œ <code>targetMap</code> é€šè¿‡æ•°æ® <code>target</code>ï¼Œå¯ä»¥è·å–åˆ° <code>depsMap</code>ï¼Œå®ƒç”¨æ¥å­˜æ”¾è¿™ä¸ªæ•°æ®å¯¹åº”çš„æ‰€æœ‰å“åº”å¼ä¾èµ–ã€‚</p>
<p><code>depsMap</code> çš„æ¯ä¸€é¡¹åˆ™æ˜¯ä¸€ä¸ª Set æ•°æ®ç»“æ„ï¼Œè€Œè¿™ä¸ª Set å°±å­˜æ”¾ç€å¯¹åº” key çš„æ›´æ–°å‡½æ•°ã€‚</p>
<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹ç»•ï¼Ÿæˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥ä¸¾ä¾‹å§ã€‚</p>
<div class="language-ini codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-ini codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">const target = { count: 1}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">const data = reactive(target)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">const effection = effect(() => {</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> console.log(data.count)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">})</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å¯¹äºè¿™ä¸ªä¾‹å­çš„ä¾èµ–å…³ç³»ï¼Œ</p>
<ol>
<li>å…¨å±€çš„ <code>targetMap</code> æ˜¯ï¼š</li>
</ol>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// targetMap: {</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//  { count: 1 }: dep</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// }</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=2>
<li>dep åˆ™æ˜¯</li>
</ol>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// dep: {</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>//  count: Set { effection }</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// }</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>è¿™æ ·ä¸€å±‚å±‚çš„ä¸‹å»ï¼Œå°±å¯ä»¥é€šè¿‡ <code>target</code> æ‰¾åˆ° <code>count</code> å¯¹åº”çš„æ›´æ–°å‡½æ•° <code>effection</code> äº†ã€‚</p>
<p>trigger</p>
<p>è¿™é‡Œæ˜¯æœ€å°åŒ–çš„å®ç°ï¼Œä»…ä»…ä¸ºäº†ä¾¿äºç†è§£åŸç†ï¼Œå®é™…ä¸Šè¦å¤æ‚å¾ˆå¤šï¼Œ</p>
<p>å…¶å® <code>type</code> çš„ä½œç”¨å¾ˆå…³é”®ï¼Œå…ˆè®°ä½ï¼Œåé¢ä¼šè¯¦ç»†è®²ã€‚</p>
<div class="language-typescript codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-typescript codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>trigger</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  target</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> object</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  type</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> TriggerOpTypes</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  key</span><span class="token operator" style=color:#393A34>?</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">unknown</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ç®€åŒ–æ¥è¯´ å°±æ˜¯é€šè¿‡ key æ‰¾åˆ°æ‰€æœ‰æ›´æ–°å‡½æ•° ä¾æ¬¡æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> dep </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> targetMap</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  dep</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>forEach</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">effect </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token function" style=color:#d73a49>effect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„é›†æˆè¿› Reactï¼Œ ä½œä¸º React çš„çŠ¶æ€ç®¡ç†åº“ä½¿ç”¨ï¼</p>
<p>ä½¿ç”¨ç¤ºèŒƒ</p>
<p>å®šä¹‰ store</p>
<div class="language-typescript codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-typescript codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// store.ts</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> reactive</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> computed</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> effect </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'@vue/reactivity'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> state </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> plusOne </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>computed</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">count </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>effect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'plusOne changed: '</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> plusOne</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>add</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">count </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> mutations </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// mutation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  add</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> store </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  state</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  computed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    plusOne</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Store</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>typeof</span><span class="token plain"> store</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>æ¶ˆè´¹ä½¿ç”¨</p>
<div class="language-tsx codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-tsx codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Index.tsx</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> useStore </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'rxv'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> mutations</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> store</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Store</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./store.ts'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Count</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> countState </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useStore</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">store</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token maybe-class-name">Store</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> state</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> computed </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> store</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> count </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> state</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> plusOne </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> computed</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      count</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      plusOne</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag class-name" style=color:#00009f>Card</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>hoverable</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>style</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#393A34>=</span><span class="token tag script language-javascript punctuation" style=color:#393A34>{</span><span class="token tag script language-javascript punctuation" style=color:#393A34>{</span><span class="token tag script language-javascript" style=color:#00009f> marginBottom</span><span class="token tag script language-javascript operator" style=color:#393A34>:</span><span class="token tag script language-javascript" style=color:#00009f> </span><span class="token tag script language-javascript number" style=color:#36acaa>24</span><span class="token tag script language-javascript" style=color:#00009f> </span><span class="token tag script language-javascript punctuation" style=color:#393A34>}</span><span class="token tag script language-javascript punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>h1</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text">è®¡æ•°å™¨</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>h1</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>div</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>className</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>chunk</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>div</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>className</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>chunk</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text">storeä¸­çš„countç°åœ¨æ˜¯ </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain">countState</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>div</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>div</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>className</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>chunk</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text">computedå€¼ä¸­çš„plusOneç°åœ¨æ˜¯ </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain">countState</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">plusOne</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>div</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag class-name" style=color:#00009f>Button</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#393A34>=</span><span class="token tag script language-javascript punctuation" style=color:#393A34>{</span><span class="token tag script language-javascript" style=color:#00009f>mutations</span><span class="token tag script language-javascript punctuation" style=color:#393A34>.</span><span class="token tag script language-javascript property-access" style=color:#00009f>add</span><span class="token tag script language-javascript punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text">add</span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag class-name" style=color:#00009f>Button</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>div</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag class-name" style=color:#00009f>Card</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag class-name" style=color:#00009f>Provider</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#393A34>=</span><span class="token tag script language-javascript punctuation" style=color:#393A34>{</span><span class="token tag script language-javascript" style=color:#00009f>store</span><span class="token tag script language-javascript punctuation" style=color:#393A34>}</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag class-name" style=color:#00009f>Count</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#393A34><span class="token plain-text"> </span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag class-name" style=color:#00009f>Provider</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å¯ä»¥çœ‹å‡ºï¼Œstoreçš„å®šä¹‰åªç”¨åˆ°äº†@vue/reactivityï¼Œè€Œrxvåªæ˜¯åœ¨ç»„ä»¶ä¸­åšäº†ä¸€å±‚æ¡¥æ¥ï¼Œè¿é€šäº†Vue3å’ŒReactï¼Œæ­£å¦‚å®ƒåå­—çš„å«ä¹‰ï¼šReact x Vueã€‚</p>
<p>å¦‚ä½•å®ç°</p>
<p>åªè¦effectèƒ½æ¥å…¥åˆ°Reactç³»ç»Ÿä¸­ï¼Œé‚£ä¹ˆå…¶ä»–çš„apiéƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯å»æ”¶é›†effectçš„ä¾èµ–ï¼Œå»é€šçŸ¥effectè§¦å‘æ›´æ–°ã€‚</p>
<p>effectæ¥å—çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”effectè¿˜æ”¯æŒé€šè¿‡ä¼ å…¥scheduleå‚æ•°æ¥è‡ªå®šä¹‰ä¾èµ–æ›´æ–°çš„æ—¶å€™éœ€è¦è§¦å‘ä»€ä¹ˆå‡½æ•°ï¼Œ</p>
<p>è€Œrxvçš„æ ¸å¿ƒapi: useStoreæ¥å—çš„ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°selectorï¼Œå®ƒä¼šè®©ç”¨æˆ·è‡ªå·±é€‰æ‹©åœ¨ç»„ä»¶ä¸­éœ€è¦è®¿é—®çš„æ•°æ®ã€‚</p>
<p>æŠŠselectoråŒ…è£…åœ¨effectä¸­æ‰§è¡Œï¼Œå»æ”¶é›†ä¾èµ–ã€‚</p>
<p>æŒ‡å®šä¾èµ–å‘ç”Ÿæ›´æ–°æ—¶ï¼Œéœ€è¦è°ƒç”¨çš„å‡½æ•°æ˜¯å½“å‰æ­£åœ¨ä½¿ç”¨useStoreçš„è¿™ä¸ªç»„ä»¶çš„forceUpdateå¼ºåˆ¶æ¸²æŸ“å‡½æ•°ã€‚</p>
<p>ç®€å•çš„çœ‹ä¸€ä¸‹æ ¸å¿ƒå®ç°</p>
<p>share.ts</p>
<div class="language-typescript codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-typescript codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>useForceUpdate</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useReducer</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> s </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> forceUpdate</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>useEffection</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>...</span><span class="token plain">effectArgs</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> Parameters</span><span class="token operator" style=color:#393A34>&lt;</span><span class="token keyword" style=color:#00009f>typeof</span><span class="token plain"> effect</span><span class="token operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ç”¨ä¸€ä¸ªrefå­˜å‚¨effection</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// effectå‡½æ•°åªéœ€è¦åˆå§‹åŒ–æ‰§è¡Œä¸€é</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> effectionRef </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#d73a49>useRef</span><span class="token generic-function generic class-name operator" style=color:#393A34>&lt;</span><span class="token generic-function generic class-name">ReactiveEffect</span><span class="token generic-function generic class-name operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">effectionRef</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    effectionRef</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">current </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>effect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>...</span><span class="token plain">effectArgs</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// å¸è½½ç»„ä»¶åå–æ¶ˆeffect</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>stopEffect</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>stop</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">effectionRef</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">current</span><span class="token operator" style=color:#393A34>!</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>useEffect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> stopEffect</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> effectionRef</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">current</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>æ ¸å¿ƒé€»è¾‘åœ¨æ­¤</p>
<div class="language-typescript codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-typescript codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> React</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> useContext </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> useForceUpdate</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> useEffection </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'./share'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Selector</span><span class="token class-name operator" style=color:#393A34>&lt;</span><span class="token class-name constant" style=color:#36acaa>T</span><span class="token class-name punctuation" style=color:#393A34>,</span><span class="token class-name"> </span><span class="token class-name constant" style=color:#36acaa>S</span><span class="token class-name operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">store</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>T</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>S</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> StoreContext </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> React</span><span class="token punctuation" style=color:#393A34>.</span><span class="token generic-function function" style=color:#d73a49>createContext</span><span class="token generic-function generic class-name operator" style=color:#393A34>&lt;</span><span class="token generic-function generic class-name builtin">any</span><span class="token generic-function generic class-name operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>null</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#d73a49>useStoreContext</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> contextValue </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useContext</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">StoreContext</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">contextValue</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>throw</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token string" style=color:#e3116c>'could not find store context value; please ensure the component is wrapped in a &lt;Provider>'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> contextValue</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token doc-comment comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>åœ¨ç»„ä»¶ä¸­è¯»å–å…¨å±€çŠ¶æ€</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic>éœ€è¦é€šè¿‡ä¼ å…¥çš„å‡½æ•°æ”¶é›†ä¾èµ–</span><br></span><span class=token-line style=color:#393A34><span class="token doc-comment comment" style=color:#999988;font-style:italic> */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> useStore </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token constant" style=color:#36acaa>T</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>S</span><span class="token operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">selector</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> Selector</span><span class="token operator" style=color:#393A34>&lt;</span><span class="token constant" style=color:#36acaa>T</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>S</span><span class="token operator" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>)</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token constant" style=color:#36acaa>S</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> forceUpdate </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useForceUpdate</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> store </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useStoreContext</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> effection </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>useEffection</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token function" style=color:#d73a49>selector</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function-variable function" style=color:#d73a49>scheduler</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> job </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>job</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>===</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>undefined</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>forceUpdate</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    lazy</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> value </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>effection</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> Provider </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> StoreContext</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Provider</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<ul>
<li><a href=https://github.com/sl1673495/react-composition-api target=_blank rel="noopener noreferrer">èµ„æ–™</a></li>
<li><a href=https://juejin.cn/post/6844904054192078855 target=_blank rel="noopener noreferrer">èµ„æ–™</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p1-data>data<a href=#p1-data class=hash-link aria-label=dataçš„ç›´æ¥é“¾æ¥ title=dataçš„ç›´æ¥é“¾æ¥>â€‹</a></h2>
<p><code>vue</code> å®ä¾‹çš„æ—¶å€™å®šä¹‰<code>data</code>å±æ€§æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>el</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'#app'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// å¯¹è±¡æ ¼å¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>data</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>foo</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'foo'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// å‡½æ•°æ ¼å¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// data () {</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>//   return {</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>//     foo: 'foo'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>//   }</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// }</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ç»„ä»¶ä¸­å®šä¹‰dataå±æ€§ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<p>å¦‚æœä¸ºç»„ä»¶dataç›´æ¥å®šä¹‰ä¸ºä¸€ä¸ªå¯¹è±¡</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token maybe-class-name">Vue</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>component</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'component1'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>template</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'&lt;div>ç»„ä»¶&lt;/div>'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>data</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>foo</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'foo'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>åˆ™ä¼šå¾—åˆ°è­¦å‘Šä¿¡æ¯</p>
<p>è­¦å‘Šè¯´æ˜ï¼šè¿”å›çš„dataåº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°åœ¨æ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹ä¸­</p>
<p><strong>ç»„ä»¶dataå®šä¹‰å‡½æ•°ä¸å¯¹è±¡çš„åŒºåˆ«</strong></p>
<p>ä¸Šé¢è®²åˆ°ç»„ä»¶dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ€è€ƒè¿‡è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åœ¨æˆ‘ä»¬å®šä¹‰å¥½ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œvueæœ€ç»ˆéƒ½ä¼šé€šè¿‡Vue.extend()æ„æˆç»„ä»¶å®ä¾‹</p>
<p>è¿™é‡Œæˆ‘ä»¬æ¨¡ä»¿ç»„ä»¶æ„é€ å‡½æ•°ï¼Œå®šä¹‰dataå±æ€§ï¼Œé‡‡ç”¨å¯¹è±¡çš„å½¢å¼</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#d73a49>Component</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Component</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>åˆ›å»ºä¸¤ä¸ªç»„ä»¶å®ä¾‹</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> componentA </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> componentB </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>äº§ç”Ÿè¿™æ ·çš„åŸå› è¿™æ˜¯ä¸¤è€…å…±ç”¨äº†åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒcomponentAä¿®æ”¹çš„å†…å®¹ï¼ŒåŒæ ·å¯¹componentBäº§ç”Ÿäº†å½±å“</p>
<p>å¦‚æœæˆ‘ä»¬é‡‡ç”¨å‡½æ•°çš„å½¢å¼ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼ˆå‡½æ•°è¿”å›çš„å¯¹è±¡å†…å­˜åœ°å€å¹¶ä¸ç›¸åŒï¼‰</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#d73a49>Component</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>data</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Component</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>data</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ä¿®æ”¹componentAç»„ä»¶dataå±æ€§çš„å€¼ï¼ŒcomponentBä¸­çš„å€¼ä¸å—å½±å“</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">componentB</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">componentA</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">componentB</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// 0</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>vueç»„ä»¶å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå®ä¾‹ï¼Œé‡‡ç”¨å‡½æ•°è¿”å›ä¸€ä¸ªå…¨æ–°dataå½¢å¼ï¼Œä½¿æ¯ä¸ªå®ä¾‹å¯¹è±¡çš„æ•°æ®ä¸ä¼šå—åˆ°å…¶ä»–å®ä¾‹å¯¹è±¡æ•°æ®çš„æ±¡æŸ“</p>
<p><strong>åŸç†åˆ†æ</strong></p>
<p>é¦–å…ˆå¯ä»¥çœ‹çœ‹vueåˆå§‹åŒ–dataçš„ä»£ç ï¼Œdataçš„å®šä¹‰å¯ä»¥æ˜¯å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡</p>
<p>æºç ä½ç½®ï¼š<code>/vue-dev/src/core/instance/state.js</code></p>
<div class="language-ts codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-ts codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>initData</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">vm</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> Component</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> data </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">$options</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">data</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  data </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">_data </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>typeof</span><span class="token plain"> data </span><span class="token operator" style=color:#393A34>===</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'function'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getData</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> vm</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> data </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>data</code>æ—¢èƒ½æ˜¯<code>object</code>ä¹Ÿèƒ½æ˜¯<code>function</code>ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šå‡ºç°ä¸Šæ–‡è­¦å‘Šå‘¢ï¼Ÿ</p>
<p>åˆ«æ€¥ï¼Œç»§ç»­çœ‹ä¸‹æ–‡</p>
<p>ç»„ä»¶åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šè¿›è¡Œé€‰é¡¹çš„åˆå¹¶</p>
<p>æºç ä½ç½®ï¼š<code>/vue-dev/src/core/util/options.js</code></p>
<p>è‡ªå®šä¹‰ç»„ä»¶ä¼šè¿›å…¥<code>mergeOptions</code>è¿›è¡Œé€‰é¡¹åˆå¹¶</p>
<div class="language-ts codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-ts codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">Vue</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">prototype</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function-variable function" style=color:#d73a49>_init</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">options</span><span class="token operator" style=color:#393A34>?</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> object</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// merge options</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">options </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> options</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">_isComponent</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// optimize internal component instantiation</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// since dynamic options merging is pretty slow, and none of the</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// internal component options needs special treatment.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>initInternalComponent</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">vm</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> options</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">$options </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>mergeOptions</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>resolveConstructorOptions</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">constructor</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      options </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      vm</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å®šä¹‰dataä¼šè¿›è¡Œæ•°æ®æ ¡éªŒ</p>
<p>æºç ä½ç½®ï¼š<code>/vue-dev/src/core/instance/init.js</code></p>
<p>è¿™æ—¶å€™<code>vm</code>å®ä¾‹ä¸º<code>undefined</code>ï¼Œè¿›å…¥ifåˆ¤æ–­ï¼Œè‹¥<code>data</code>ç±»å‹ä¸æ˜¯<code>function</code>ï¼Œåˆ™å‡ºç°è­¦å‘Šæç¤º</p>
<div class="language-tsx codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-tsx codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">strats</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method-variable function-variable method function property-access" style=color:#d73a49>data</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  parentVal</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  childVal</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  vm</span><span class="token operator" style=color:#393A34>?</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">vm</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">childVal </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>typeof</span><span class="token plain"> childVal </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'function'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      process</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">env</span><span class="token punctuation" style=color:#393A34>.</span><span class="token constant" style=color:#36acaa>NODE_ENV</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'production'</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token function" style=color:#d73a49>warn</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">   </span><span class="token string" style=color:#e3116c>'The "data" option should be a function '</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token string" style=color:#e3116c>'that returns a per-instance value in component '</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token string" style=color:#e3116c>'definitions.'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">   vm</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> parentVal</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>mergeDataOrFn</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">parentVal</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> childVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>mergeDataOrFn</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">parentVal</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> childVal</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> vm</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>ç»“è®º</strong></p>
<ul>
<li>æ ¹å®ä¾‹å¯¹è±¡<code>data</code>å¯ä»¥æ˜¯å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼ˆæ ¹å®ä¾‹æ˜¯å•ä¾‹ï¼‰ï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®æ±¡æŸ“æƒ…å†µ</li>
<li>ç»„ä»¶å®ä¾‹å¯¹è±¡<code>data</code>å¿…é¡»ä¸ºå‡½æ•°ï¼Œç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å¤šä¸ªç»„ä»¶å®ä¾‹å¯¹è±¡ä¹‹é—´å…±ç”¨ä¸€ä¸ª<code>data</code>ï¼Œäº§ç”Ÿæ•°æ®æ±¡æŸ“ã€‚é‡‡ç”¨å‡½æ•°çš„å½¢å¼ï¼Œ<code>initData</code>æ—¶ä¼šå°†å…¶ä½œä¸ºå·¥å‚å‡½æ•°éƒ½ä¼šè¿”å›å…¨æ–°<code>data</code>å¯¹è±¡</li>
</ul>
<p><strong>å…³é”®è¯</strong>ï¼švueæ›´æ”¹dataå±æ€§</p>
<p><strong>ç›´æ¥æ·»åŠ å±æ€§çš„é—®é¢˜</strong></p>
<p>æˆ‘ä»¬ä»ä¸€ä¸ªä¾‹å­å¼€å§‹</p>
<p>å®šä¹‰ä¸€ä¸ª<code>p</code>æ ‡ç­¾ï¼Œé€šè¿‡<code>v-for</code>æŒ‡ä»¤è¿›è¡Œéå†</p>
<p>ç„¶åç»™<code>botton</code>æ ‡ç­¾ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œæˆ‘ä»¬é¢„æœŸç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæ•°æ®æ–°å¢ä¸€ä¸ªå±æ€§ï¼Œç•Œé¢ä¹Ÿ æ–°å¢ä¸€è¡Œ</p>
<div class="language-vue codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-vue codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">&lt;template></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> &lt;p v-for="(value,key) in item" :key="key"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> {{ value }}</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> &lt;/p></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> &lt;button @click="addProperty">åŠ¨æ€æ·»åŠ æ–°å±æ€§&lt;/button></span><br></span><span class=token-line style=color:#393A34><span class="token plain">&lt;/template></span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å®ä¾‹åŒ–ä¸€ä¸ª<code>vue</code>å®ä¾‹ï¼Œå®šä¹‰<code>data</code>å±æ€§å’Œ<code>methods</code>æ–¹æ³•</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>el</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'#app'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function-variable function" style=color:#d73a49>data</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// 'æ—§å±æ€§'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>methods</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>addProperty</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">newProperty</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'æ–°å±æ€§'</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¸ºitemsæ·»åŠ æ–°å±æ€§</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è¾“å‡ºå¸¦æœ‰newPropertyçš„items</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ç‚¹å‡»æŒ‰é’®ï¼Œå‘ç°ç»“æœä¸åŠé¢„æœŸï¼Œæ•°æ®è™½ç„¶æ›´æ–°äº†ï¼ˆconsoleæ‰“å°å‡ºäº†æ–°å±æ€§ï¼‰ï¼Œä½†é¡µé¢å¹¶æ²¡æœ‰æ›´æ–°</p>
<p><strong>åŸç†åˆ†æ</strong></p>
<p>ä¸ºä»€ä¹ˆäº§ç”Ÿä¸Šé¢çš„æƒ…å†µå‘¢ï¼Ÿ</p>
<p>ä¸‹é¢æ¥åˆ†æä¸€ä¸‹</p>
<p><code>vue2</code>æ˜¯ç”¨è¿‡<code>Object.defineProperty</code>å®ç°æ•°æ®å“åº”å¼</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> obj </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>defineProperty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'foo'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>get foo:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">val</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> val</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>set foo:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">newVal</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      val </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> newVal</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>å½“æˆ‘ä»¬è®¿é—®<code>foo</code>å±æ€§æˆ–è€…è®¾ç½®<code>foo</code>å€¼çš„æ—¶å€™éƒ½èƒ½å¤Ÿè§¦å‘<code>setterä¸getter</code></p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">foo</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'new'</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ä½†æ˜¯æˆ‘ä»¬ä¸º<code>obj</code>æ·»åŠ æ–°å±æ€§çš„æ—¶å€™ï¼Œå´æ— æ³•è§¦å‘äº‹ä»¶å±æ€§çš„æ‹¦æˆª</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'æ–°å±æ€§'</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>åŸå› æ˜¯ä¸€å¼€å§‹<code>obj</code>çš„<code>foo</code>å±æ€§è¢«è®¾æˆäº†å“åº”å¼æ•°æ®ï¼Œè€Œ<code>bar</code>æ˜¯åé¢æ–°å¢çš„å±æ€§ï¼Œå¹¶æ²¡æœ‰é€šè¿‡<code>Object.defineProperty</code>è®¾ç½®æˆå“åº”å¼æ•°æ®</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p><code>Vue</code> ä¸å…è®¸åœ¨å·²ç»åˆ›å»ºçš„å®ä¾‹ä¸ŠåŠ¨æ€æ·»åŠ æ–°çš„å“åº”å¼å±æ€§</p>
<p>è‹¥æƒ³å®ç°æ•°æ®ä¸è§†å›¾åŒæ­¥æ›´æ–°ï¼Œå¯é‡‡å–ä¸‹é¢ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><code>Vue.set()</code></li>
<li><code>Object.assign()</code></li>
<li><code>$forcecUpdated()</code></li>
</ul>
<p><strong><code>Vue.set()</code></strong></p>
<p><code>Vue.set( target, propertyName/index, value )</code></p>
<p>å‚æ•°</p>
<ul>
<li><code>{Object | Array} target</code></li>
<li><code>{string | number} propertyName/index</code></li>
<li><code>{any} value</code></li>
</ul>
<p>è¿”å›å€¼ï¼šè®¾ç½®çš„å€¼</p>
<p>é€šè¿‡<code>Vue.set</code>å‘å“åº”å¼å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª<code>property</code>ï¼Œå¹¶ç¡®ä¿è¿™ä¸ªæ–° <code>property</code> åŒæ ·æ˜¯å“åº”å¼çš„ï¼Œä¸”è§¦å‘è§†å›¾æ›´æ–°</p>
<p>å…³äº<code>Vue.set</code>æºç ï¼ˆçœç•¥äº†å¾ˆå¤šä¸æœ¬èŠ‚ä¸ç›¸å…³çš„ä»£ç ï¼‰</p>
<p>æºç ä½ç½®ï¼š<code>src\core\observer\index.js</code></p>
<div class="language-ts codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-ts codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">Array</span><span class="token operator" style=color:#393A34>&lt;</span><span class="token builtin">any</span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> object</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> val</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style=color:#393A34>)</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>defineReactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ob</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ob</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">dep</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>notify</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> val</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>è¿™é‡Œæ— éå†æ¬¡è°ƒç”¨ <code>defineReactive</code> æ–¹æ³•ï¼Œå®ç°æ–°å¢å±æ€§çš„å“åº”å¼</p>
<p>å…³äº <code>defineReactive</code> æ–¹æ³•ï¼Œå†…éƒ¨è¿˜æ˜¯é€šè¿‡ <code>Object.defineProperty</code> å®ç°å±æ€§æ‹¦æˆª</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>defineReactive</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">obj</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> key</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>defineProperty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>get </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">key</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c>:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">val</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> val</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal </span><span class="token operator" style=color:#393A34>!==</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>set </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">key</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c>:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">newVal</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        val </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> newVal</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong><code>Object.assign()</code></strong></p>
<p>ç›´æ¥ä½¿ç”¨Object.assign()æ·»åŠ åˆ°å¯¹è±¡çš„æ–°å±æ€§ä¸ä¼šè§¦å‘æ›´æ–°</p>
<p>åº”åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆå¹¶åŸå¯¹è±¡å’Œæ··å…¥å¯¹è±¡çš„å±æ€§</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">someObject</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>assign</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">someObject</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#36acaa>newProperty1</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#36acaa>newProperty2</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong><code>$forceUpdate</code></strong></p>
<p>å¦‚æœä½ å‘ç°ä½ è‡ªå·±éœ€è¦åœ¨ Vue ä¸­åšä¸€æ¬¡å¼ºåˆ¶æ›´æ–°ï¼Œ99.9% çš„æƒ…å†µï¼Œæ˜¯ä½ åœ¨æŸä¸ªåœ°æ–¹åšé”™äº†äº‹</p>
<p><code>$forceUpdate</code> è¿«ä½¿ Vue å®ä¾‹é‡æ–°æ¸²æŸ“</p>
<p>PSï¼šä»…ä»…å½±å“å®ä¾‹æœ¬èº«å’Œæ’å…¥æ’æ§½å†…å®¹çš„å­ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å­ç»„ä»¶ã€‚</p>
<p><strong>å°ç»“</strong></p>
<p>å¦‚æœä¸ºå¯¹è±¡æ·»åŠ å°‘é‡çš„æ–°å±æ€§ï¼Œå¯ä»¥ç›´æ¥é‡‡ç”¨<code>Vue.set()</code></p>
<p>å¦‚æœéœ€è¦ä¸ºæ–°å¯¹è±¡æ·»åŠ å¤§é‡çš„æ–°å±æ€§ï¼Œåˆ™é€šè¿‡<code>Object.assign()</code>åˆ›å»ºæ–°å¯¹è±¡</p>
<p>å¦‚æœä½ å®åœ¨ä¸çŸ¥é“æ€ä¹ˆæ“ä½œæ—¶ï¼Œå¯é‡‡å–<code>$forceUpdate()</code>è¿›è¡Œå¼ºåˆ¶åˆ·æ–° (ä¸å»ºè®®)</p>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p1-ref-reactive>ref å’Œ reactive æœ‰ä½•åŒºåˆ«å—<a href=#p1-ref-reactive class=hash-link aria-label="ref å’Œ reactive æœ‰ä½•åŒºåˆ«å—çš„ç›´æ¥é“¾æ¥" title="ref å’Œ reactive æœ‰ä½•åŒºåˆ«å—çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨ Vue 3 ä¸­ï¼Œ<code>ref</code> å’Œ <code>reactive</code> æ˜¯åˆ›å»ºå“åº”å¼æ•°æ®çš„ä¸¤ç§ä¸åŒæ–¹æ³•ï¼Œå®ƒä»¬éƒ½æ˜¯ Vue çš„å“åº”å¼ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨ä½¿ç”¨æ–¹å¼å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚ä¸‹é¢æ˜¯ <code>ref</code> å’Œ <code>reactive</code> çš„ä¸»è¦åŒºåˆ«ï¼š</p>
<p><code>ref</code></p>
<ul>
<li><strong>ç”¨æ³•</strong>ï¼š<code>ref</code> ç”¨äºåˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®ã€‚å½“ä½ éœ€è¦ä½¿åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ï¼šstring, number, booleanï¼‰å˜å¾—å“åº”å¼æ—¶ï¼Œ<code>ref</code> æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼š<code>ref</code> è¿”å›ä¸€ä¸ªåŒ…å« <code>value</code> å±æ€§çš„å¯¹è±¡ã€‚ä½ éœ€è¦é€šè¿‡ <code>.value</code> å±æ€§æ¥è®¿é—®æˆ–ä¿®æ”¹å…¶å†…éƒ¨å€¼ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºå¯¹è±¡å’Œæ•°ç»„ï¼Œä½†ä¸»è¦æ˜¯ä¸ºäº†åŸºæœ¬æ•°æ®ç±»å‹è®¾è®¡çš„ã€‚</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> ref </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> count </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>ref</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">count</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è®¿é—®å€¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">count</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¿®æ”¹å€¼</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>reactive</code></p>
<ul>
<li><strong>ç”¨æ³•</strong>ï¼š<code>reactive</code> ç”¨äºåˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å¤æ‚ç±»å‹æ•°æ®ï¼Œå¦‚å¯¹è±¡æˆ–æ•°ç»„ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼šç›´æ¥è¿”å›åŸå§‹å¯¹è±¡çš„å“åº”å¼ä»£ç†ï¼Œä¸éœ€è¦é€šè¿‡ <code>.value</code> å±æ€§æ¥è®¿é—®æˆ–ä¿®æ”¹ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ˜¯ä¸ºäº†ä½¿å¯¹è±¡æˆ–æ•°ç»„è¿™æ ·çš„å¼•ç”¨æ•°æ®ç±»å‹å˜å¾—å“åº”å¼è€Œè®¾è®¡çš„ã€‚</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> reactive </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> state </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è®¿é—®å€¼</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¿®æ”¹å€¼</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ä¸»è¦åŒºåˆ«</p>
<ol>
<li><strong>æ•°æ®ç±»å‹</strong>ï¼š<code>ref</code> ä¸»è¦ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå¯¹è±¡å’Œæ•°ç»„ï¼›<code>reactive</code> é€‚ç”¨äºå¯¹è±¡æˆ–æ•°ç»„ç­‰å¼•ç”¨æ•°æ®ç±»å‹ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼š<code>ref</code> è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦é€šè¿‡ <code>.value</code> æ¥è·å–æˆ–è®¾ç½®å€¼ï¼›è€Œ <code>reactive</code> è¿”å›çš„æ˜¯å¯¹è±¡æˆ–æ•°ç»„çš„å“åº”å¼ä»£ç†ï¼Œå¯ä»¥ç›´æ¥æ“ä½œã€‚</li>
<li><strong>æ¨¡æ¿ä¸­ä½¿ç”¨</strong>ï¼šåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ï¼Œ<code>ref</code> åˆ›å»ºçš„å“åº”å¼æ•°æ®è®¿é—®æ—¶ä¸éœ€è¦ <code>.value</code>ï¼ŒVue æ¨¡æ¿ä¼šè‡ªåŠ¨è§£åŒ…ï¼›<code>reactive</code> å¯¹è±¡åœ¨æ¨¡æ¿ä¸­çš„è¡Œä¸ºä¸æ™®é€šå¯¹è±¡ç›¸åŒã€‚</li>
</ol>
<p>ä½¿ç”¨å»ºè®®</p>
<ul>
<li>å½“ä½ å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œä½¿ç”¨ <code>ref</code>ï¼›</li>
<li>å½“ä½ éœ€è¦ç®¡ç†ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„ï¼ˆå¦‚å¯¹è±¡æˆ–æ•°ç»„ï¼‰ï¼Œä½¿ç”¨ <code>reactive</code> ä»¥ä¿æŒä»£ç çš„ç®€æ´å’Œç›´è§‚ã€‚</li>
</ul>
<p>åœ¨ Vue 3 çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå¤„ç†æ·±å±‚åµŒå¥—çš„æ•°æ®æ—¶ï¼Œ<code>ref</code> å’Œ <code>reactive</code> åœ¨è¡Œä¸ºä¸Šæœ‰ä¸€äº›ç»†å¾®ä½†é‡è¦çš„åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ°å¯¹è±¡ã€æ•°ç»„ä»¥åŠ JavaScript å†…ç½®çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ Map å’Œ Setï¼‰æ—¶ã€‚è¿™äº›åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å¦‚ä½•ä½¿åµŒå¥—çš„æ•°æ®æˆä¸ºå“åº”å¼çš„ï¼Œä»¥åŠå¦‚ä½•ç»´æŠ¤è¿™äº›å“åº”æ€§ã€‚</p>
<p>å¤„ç†æ·±å±‚åµŒå¥—çš„æ•°æ®</p>
<p>æ— è®ºæ˜¯ä½¿ç”¨ <code>ref</code> è¿˜æ˜¯ <code>reactive</code>ï¼ŒVue ä¼šå°è¯•ä½¿ç»™å®šçš„æ•°æ®ç»“æ„åŠå…¶åµŒå¥—çš„æ‰€æœ‰å­ç»“æ„å˜æˆå“åº”å¼çš„ã€‚ä½†æ˜¯ï¼Œå…·ä½“çš„å®ç°æœºåˆ¶æœ‰æ‰€ä¸åŒã€‚</p>
<p><code>reactive</code></p>
<ul>
<li><code>reactive</code> å¯¹è±¡é»˜è®¤æ·±åº¦å“åº”å¼ã€‚å½“ä½ ä½¿ç”¨ <code>reactive</code> ä½¿ä¸€ä¸ªå¯¹è±¡å˜æˆå“åº”å¼æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å¯¹è±¡å’Œæ•°ç»„ä¹Ÿä¼šè‡ªåŠ¨å˜æˆå“åº”å¼çš„ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°æ®ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”è¿™äº›ä¿®æ”¹å°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</li>
<li>å¯¹äº JavaScript çš„å†…ç½®æ•°æ®ç»“æ„ï¼Œå¦‚ Map å’Œ Setï¼ŒVue 3 ä¹Ÿæä¾›äº†å“åº”å¼æ”¯æŒï¼Œä½†å®ƒä»¬å¿…é¡»é€šè¿‡ <code>reactive</code> æ–¹æ³•æ¥åˆ›å»ºæˆ–è½¬æ¢ä¸ºå“åº”å¼çš„ã€‚</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> state </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>nested</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>numbers</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>map</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">nested</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘è§†å›¾æ›´æ–°</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">numbers</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>push</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>4</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘è§†å›¾æ›´æ–°</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">map</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>set</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'key'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'value'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘è§†å›¾æ›´æ–°</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>ref</code></p>
<ul>
<li>ä½¿ç”¨ <code>ref</code> åˆ›å»ºå“åº”å¼æ•°æ®æ—¶ï¼Œå¦‚æœ <code>ref</code> è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼ŒVue ä¼šå°†è¯¥å¯¹è±¡æˆ–æ•°ç»„å†…éƒ¨è½¬æ¢ä¸ºæ·±åº¦å“åº”å¼ã€‚ç„¶è€Œï¼Œè¿™ç§è½¬æ¢ä»…å‘ç”Ÿåœ¨èµ‹å€¼æ“ä½œæ—¶ï¼Œå¦‚æœåç»­å¯¹è¯¥å¯¹è±¡æˆ–æ•°ç»„è¿›è¡Œå†åµŒå¥—ï¼Œæ–°å¢çš„åµŒå¥—ä¸ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå“åº”å¼ã€‚</li>
<li>å¯¹äºå†…ç½®æ•°æ®ç»“æ„å¦‚ Map å’Œ Setï¼Œ<code>ref</code> å¯ä»¥å­˜å‚¨å®ƒä»¬ï¼Œä½†ä¸ä¼šä½¿å®ƒä»¬æˆ–å…¶å†…å®¹å˜æˆå“åº”å¼çš„ã€‚å¦‚æœä½ éœ€è¦åœ¨æ¨¡æ¿ä¸­ç›´æ¥ç»‘å®šè¿™äº›æ•°æ®ç»“æ„çš„å“åº”å¼å˜åŒ–ï¼Œä½¿ç”¨ <code>reactive</code> ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> nestedObj </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>ref</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>nested</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">nestedObj</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">nested</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘è§†å›¾æ›´æ–°</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> map </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>ref</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">map</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>set</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'key'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'value'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œé™¤éé‡æ–°èµ‹å€¼ç»™ map.value</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>æ€»ç»“</p>
<p>å½“å¤„ç†æ·±å±‚åµŒå¥—çš„å¯¹è±¡ã€æ•°ç»„æˆ–å†…ç½®æ•°æ®ç»“æ„æ—¶ï¼š</p>
<ul>
<li><code>reactive</code> é»˜è®¤æä¾›æ·±åº¦å“åº”å¼ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ Mapã€Set ç­‰å†…ç½®æ•°æ®ç»“æ„å˜ä¸ºå“åº”å¼ã€‚</li>
<li><code>ref</code> åœ¨èµ‹å€¼å¯¹è±¡æˆ–æ•°ç»„æ—¶è‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºå“åº”å¼ï¼Œä½†ä¸é€‚ç”¨äº Map æˆ– Set ç­‰å†…ç½®æ•°æ®ç»“æ„çš„æ·±åº¦å“åº”ã€‚</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºå¤æ‚æˆ–æ·±å±‚åµŒå¥—çš„æ•°æ®ç»“æ„ï¼Œ<code>reactive</code> æ›´åŠ é€‚åˆã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æˆ–ä¸å¤ªå¤æ‚çš„åµŒå¥—æ•°æ®ï¼Œ<code>ref</code> å¯ä»¥æä¾›æ–¹ä¾¿çš„å“åº”å¼è½¬æ¢ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p0-computed-watch>computed å’Œ watch çš„åŒºåˆ«<a href=#p0-computed-watch class=hash-link aria-label="computed å’Œ watch çš„åŒºåˆ«çš„ç›´æ¥é“¾æ¥" title="computed å’Œ watch çš„åŒºåˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<ol>
<li>
<p>æ”¯æŒç¼“å­˜ï¼Œåªæœ‰ä¾èµ–æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œæ‰ä¼šé‡æ–°è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å±æ€§å¯ç”¨äºå¿«é€Ÿè®¡ç®—è§†å›¾ï¼ˆViewï¼‰ä¸­æ˜¾ç¤ºçš„å±æ€§ã€‚è¿™äº›è®¡ç®—å°†è¢«ç¼“å­˜ï¼Œå¹¶ä¸”åªåœ¨éœ€è¦æ—¶æ›´æ–°ã€‚computedæ˜¯è®¡ç®—å±æ€§çš„; å®ƒä¼šæ ¹æ®æ‰€ä¾èµ–çš„æ•°æ®åŠ¨æ€æ˜¾ç¤ºæ–°çš„è®¡ç®—ç»“æœ, è¯¥è®¡ç®—ç»“æœä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚computedçš„å€¼åœ¨getteræ‰§è¡Œåæ˜¯ä¼šè¢«ç¼“å­˜çš„ã€‚å¦‚æœæ‰€ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶å€™, å°±ä¼šé‡æ–°è°ƒç”¨getteræ¥è®¡ç®—æœ€æ–°çš„ç»“æœã€‚</p>
</li>
<li>
<p>ä¸æ”¯æŒå¼‚æ­¥ï¼Œå½“computedå†…æœ‰å¼‚æ­¥æ“ä½œæ—¶æ— æ•ˆï¼Œæ— æ³•ç›‘å¬æ•°æ®çš„å˜åŒ–</p>
</li>
<li>
<p>computed å±æ€§å€¼ä¼šé»˜è®¤èµ°ç¼“å­˜ï¼Œè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºdataä¸­å£°æ˜è¿‡æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’çš„propsä¸­çš„æ•°æ®é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼</p>
</li>
<li>
<p>å¦‚æœä¸€ä¸ªå±æ€§æ˜¯ç”±å…¶ä»–å±æ€§è®¡ç®—è€Œæ¥çš„ï¼Œè¿™ä¸ªå±æ€§ä¾èµ–å…¶ä»–å±æ€§ï¼Œæ˜¯ä¸€ä¸ªå¤šå¯¹ä¸€æˆ–è€…ä¸€å¯¹ä¸€ï¼Œä¸€èˆ¬ç”¨computed</p>
</li>
<li>
<p>å¦‚æœcomputedå±æ€§å±æ€§å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šèµ°getæ–¹æ³•ï¼›å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å±æ€§çš„å±æ€§å€¼ï¼›åœ¨computedä¸­çš„ï¼Œå±æ€§éƒ½æœ‰ä¸€ä¸ªgetå’Œä¸€ä¸ªsetæ–¹æ³•ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè°ƒç”¨setæ–¹æ³•ã€‚</p>
</li>
<li>
<p>é€‚ç”¨äºä¸€äº›é‡å¤ä½¿ç”¨æ•°æ®æˆ–å¤æ‚åŠè´¹æ—¶çš„è¿ç®—ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¾å…¥computedä¸­è¿›è¡Œè®¡ç®—, ç„¶åä¼šåœ¨computedä¸­ç¼“å­˜èµ·æ¥, ä¸‹æ¬¡å°±å¯ä»¥ç›´æ¥è·å–äº†ã€‚</p>
</li>
<li>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦çš„æ•°æ®ä¾èµ–äºå…¶ä»–çš„æ•°æ®çš„è¯, æˆ‘ä»¬å¯ä»¥æŠŠè¯¥æ•°æ®è®¾è®¡ä¸ºcomputedä¸­ã€‚</p>
</li>
<li>
<p>computed æ˜¯åŸºäºå“åº”æ€§ä¾èµ–æ¥è¿›è¡Œç¼“å­˜çš„ã€‚åªæœ‰åœ¨å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼, ä¹Ÿå°±æ˜¯è¯´, å½“msgå±æ€§å€¼æ²¡æœ‰å‘ç”Ÿæ”¹å˜æ—¶, å¤šæ¬¡è®¿é—® reversedMsg è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰ç¼“å­˜çš„è®¡ç®—ç»“æœ, è€Œä¸ä¼šå†æ¬¡æ‰§è¡Œcomputedä¸­çš„å‡½æ•°ã€‚ä½†æ˜¯methodsæ–¹æ³•ä¸­æ˜¯æ¯æ¬¡è°ƒç”¨, éƒ½ä¼šæ‰§è¡Œå‡½æ•°çš„, methodså®ƒä¸æ˜¯å“åº”å¼çš„ã€‚</p>
</li>
<li>
<p>computedä¸­çš„æˆå‘˜å¯ä»¥åªå®šä¹‰ä¸€ä¸ªå‡½æ•°ä½œä¸ºåªè¯»å±æ€§, ä¹Ÿå¯ä»¥å®šä¹‰æˆ get/setå˜æˆå¯è¯»å†™å±æ€§, ä½†æ˜¯methodsä¸­çš„æˆå‘˜æ²¡æœ‰è¿™æ ·çš„ã€‚</p>
</li>
</ol>
<p><strong>ä¾¦å¬å±æ€§watchï¼š</strong></p>
<p>1.watchå®ƒæ˜¯ä¸€ä¸ªå¯¹dataçš„æ•°æ®ç›‘å¬å›è°ƒ, å½“ä¾èµ–çš„dataçš„æ•°æ®å˜åŒ–æ—¶, ä¼šæ‰§è¡Œå›è°ƒã€‚åœ¨å›è°ƒä¸­ä¼šä¼ å…¥newValå’ŒoldValä¸¤ä¸ªå‚æ•°ã€‚Vueå®åˆ—å°†ä¼šåœ¨å®ä¾‹åŒ–æ—¶è°ƒç”¨$watch(), ä»–ä¼šéå†watchå¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ã€‚watchçš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼šå½“åœ¨dataä¸­çš„æŸä¸ªæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶, æˆ‘ä»¬éœ€è¦åšä¸€äº›æ“ä½œ, æˆ–è€…å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶. æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨watchæ¥è¿›è¡Œç›‘å¬ã€‚watchæ™®é€šç›‘å¬å’Œæ·±åº¦ç›‘å¬ä¸æ”¯æŒç¼“å­˜ï¼Œæ•°æ®å˜ï¼Œç›´æ¥ä¼šè§¦å‘ç›¸åº”çš„æ“ä½œï¼›</p>
<p>2.watché‡Œé¢æœ‰ä¸€ä¸ªå±æ€§ä¸ºdeepï¼Œå«ä¹‰æ˜¯ï¼šæ˜¯å¦æ·±åº¦ç›‘å¬æŸä¸ªå¯¹è±¡çš„å€¼, è¯¥å€¼é»˜è®¤ä¸ºfalseã€‚watchæ”¯æŒå¼‚æ­¥ï¼›</p>
<p>3.ç›‘å¬çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€æ–°çš„å€¼ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥ä¹‹å‰çš„å€¼ï¼›</p>
<p>4.å½“ä¸€ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦æ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼›ä¸€å¯¹å¤šï¼›</p>
<p>5.ç›‘å¬æ•°æ®å¿…é¡»æ˜¯dataä¸­å£°æ˜è¿‡æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¸­çš„æ•°æ®ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè§¦å‘å…¶ä»–æ“ä½œï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ</p>
<p><strong>watch å’Œ computedçš„åŒºåˆ«æ˜¯ï¼š</strong></p>
<p>ç›¸åŒç‚¹ï¼šä»–ä»¬ä¸¤è€…éƒ½æ˜¯è§‚å¯Ÿé¡µé¢æ•°æ®å˜åŒ–çš„ã€‚</p>
<p>ä¸åŒç‚¹ï¼šcomputedåªæœ‰å½“ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰ä¼šè®¡ç®—, å½“æ•°æ®æ²¡æœ‰å˜åŒ–æ—¶, å®ƒä¼šè¯»å–ç¼“å­˜æ•°æ®ã€‚ watchæ¯æ¬¡éƒ½éœ€è¦æ‰§è¡Œå‡½æ•°ã€‚watchæ›´é€‚ç”¨äºæ•°æ®å˜åŒ–æ—¶çš„å¼‚æ­¥æ“ä½œã€‚</p>
<p>å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚è¿™æ˜¯å’Œcomputedæœ€å¤§çš„åŒºåˆ«ï¼Œè¯·å‹¿æ»¥ç”¨ã€‚</p>
<p>åœ¨ Vue ä¸­ï¼Œ<code>computed</code> å’Œ <code>watch</code> æ˜¯ä¸¤ç§ç”¨äºç›‘å¬å’Œå“åº”æ•°æ®å˜åŒ–çš„æ–¹å¼ã€‚</p>
<p><code>computed</code> æ˜¯è®¡ç®—å±æ€§ï¼Œå®ƒæ˜¯åŸºäºå“åº”å¼æ•°æ®è¿›è¡Œè®¡ç®—å¾—åˆ°çš„ä¸€ä¸ªæ–°çš„æ´¾ç”Ÿå±æ€§ã€‚è®¡ç®—å±æ€§å¯ä»¥æ¥æ”¶å…¶ä»–å“åº”å¼æ•°æ®ä½œä¸ºä¾èµ–ï¼Œå¹¶ä¸”åªæœ‰å½“ä¾èµ–æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®¡ç®—å±æ€§æ‰ä¼šé‡æ–°è®¡ç®—ã€‚è®¡ç®—å±æ€§çš„å€¼ä¼šè¢«ç¼“å­˜ï¼Œåªæœ‰åœ¨ä¾èµ–æ•°æ®å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œè¿™æ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚è®¡ç®—å±æ€§çš„å®šä¹‰æ–¹å¼æ˜¯ä½¿ç”¨ <code>computed</code> å‡½æ•°æˆ–è€…åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ <code>get</code> å’Œ <code>set</code> æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è®¡ç®—å±æ€§çš„ç¤ºä¾‹ï¼š</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> reactive</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> computed </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> state </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>firstName</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'John'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>lastName</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'Doe'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> fullName </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>computed</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style=color:#393A34>.</span><span class="token template-string interpolation property-access">firstName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c> </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation punctuation" style=color:#393A34>.</span><span class="token template-string interpolation property-access">lastName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fullName</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è¾“å‡º: "John Doe"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">firstName</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'Mike'</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¿®æ”¹firstName</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fullName</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è¾“å‡º: "Mike Doe"</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>watch</code> æ˜¯ç”¨äºç›‘å¬ç‰¹å®šå“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚<code>watch</code> å¯ä»¥ç›‘å¬å•ä¸ªæ•°æ®çš„å˜åŒ–ï¼Œä¹Ÿå¯ä»¥ç›‘å¬å¤šä¸ªæ•°æ®çš„å˜åŒ–ã€‚å½“è¢«ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>watch</code> çš„å›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œã€‚<code>watch</code> è¿˜æ”¯æŒæ·±åº¦ç›‘å¬å¯¹è±¡çš„å˜åŒ–ä»¥åŠå¼‚æ­¥æ“ä½œã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>watch</code> çš„ç¤ºä¾‹ï¼š</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> reactive</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> watch </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> state </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>count</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>watch</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">newVal</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> oldVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token template-string string" style=color:#e3116c>count ä» </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">oldVal</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string string" style=color:#e3116c> å˜ä¸º </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>${</span><span class="token template-string interpolation">newVal</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#393A34>}</span><span class="token template-string template-punctuation string" style=color:#e3116c>`</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">state</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">count</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// è¾“å‡º: "count ä» 0 å˜ä¸º 1"</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>ä»¥ä¸Šæ˜¯ <code>computed</code> å’Œ <code>watch</code> çš„åŸºæœ¬ç”¨æ³•ã€‚é€šè¿‡ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ç›‘å¬å’Œå“åº”æ•°æ®çš„å˜åŒ–ï¼Œå®ç°æ›´åŠ çµæ´»çš„é€»è¾‘å’Œäº¤äº’ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œå¯¹æ¯”äº† Vue 3 ä¸­çš„ <code>computed</code> è®¡ç®—å±æ€§å’Œæ™®é€šå‡½æ•°æ–¹æ³•çš„ä¸»è¦å·®å¼‚ï¼š</p>
<table><thead><tr><th>ç‰¹æ€§<th>è®¡ç®—å±æ€§ (<code>computed</code>)<th>æ™®é€šå‡½æ•°æ–¹æ³• (<code>methods</code>)<tbody><tr><td><strong>ç¼“å­˜</strong><td>æ˜¯ã€‚åªæœ‰å½“ä¾èµ–æ•°æ®å˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚<td>å¦ã€‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œå‡½æ•°é€»è¾‘ã€‚<tr><td><strong>æ€§èƒ½</strong><td>é«˜ã€‚é¿å…äº†ä¸å¿…è¦çš„è®¡ç®—ï¼Œåªåœ¨ä¾èµ–å˜åŒ–æ—¶é‡æ–°è®¡ç®—ã€‚<td>è¾ƒä½ã€‚ä¸åŒºåˆ†æ˜¯å¦æœ‰æ•°æ®æ›´æ–°ï¼Œéƒ½ä¼šæ‰§è¡Œã€‚<tr><td><strong>è§¦å‘æ›´æ–°</strong><td>ä¾èµ–æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°ã€‚<td>éœ€è¦æ‰‹åŠ¨è§¦å‘æˆ–ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶æ‰æ›´æ–°ã€‚<tr><td><strong>ä½¿ç”¨åœºæ™¯</strong><td>å½“æ•°æ®å˜åŒ–éœ€è¦è¿›è¡Œå¤æ‚è¿ç®—æ—¶ï¼Œä¸”ç»“æœè¦è¢«å¤šæ¬¡å¼•ç”¨ã€‚<td>æ¯æ¬¡éƒ½éœ€æ‰§è¡Œæ–°é€»è¾‘æˆ–æ“ä½œä¸ä¾èµ–å“åº”å¼æ•°æ®æ—¶ã€‚<tr><td><strong>è®¿é—®æ–¹å¼</strong><td>å¦‚è®¿é—®å±æ€§ä¸€æ ·ï¼Œä¸éœ€è¦åŠ æ‹¬å·ã€‚<td>åœ¨æ¨¡æ¿ä¸­è°ƒç”¨æ—¶éœ€è¦åŠ æ‹¬å·ã€‚<tr><td><strong>è¿”å›å€¼</strong><td>è°ƒç”¨æ—¶è¿”å›è®¡ç®—åçš„ç»“æœï¼Œä¸éœ€è¦æ‰§è¡Œä»»ä½•å‡½æ•°ã€‚<td>å¿…é¡»æ‰§è¡Œå‡½æ•°ä»¥è·å–ç»“æœã€‚<tr><td><strong>æ›´æ–°æ€§èƒ½</strong><td>åªåœ¨ä¾èµ–å˜åŒ–æ—¶é‡æ–°æ±‚å€¼ï¼Œå¦‚æœä¾èµ–æœªå˜åŒ–åˆ™è¿”å›ä¸Šæ¬¡çš„ç»“æœã€‚<td>åœ¨æ¯æ¬¡è®¿é—®æˆ–è°ƒç”¨æ—¶æ— æ¡ä»¶æ‰§è¡Œï¼Œä¸è€ƒè™‘ä¾èµ–æ•°æ®æ˜¯å¦å˜åŒ–ã€‚</table>
<p>é€šè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤è€…åœ¨ Vue åº”ç”¨ä¸­å„è‡ªçš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯ã€‚<code>computed</code> é€‚åˆç”¨äºåŸºäºæ•°æ®å˜åŒ–éœ€è¦é‡æ–°è®¡ç®—çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯å½“è¿™äº›è®¡ç®—æ¯”è¾ƒæ˜‚è´µï¼Œæˆ–è€…è®¡ç®—ç»“æœä¼šè¢«å¤šå¤„ä½¿ç”¨æ—¶ã€‚è€Œæ™®é€šå‡½æ•°æ–¹æ³•æ›´é€‚åˆç”¨äºæ‰§è¡Œä¸ä¾èµ–å“åº”å¼æ•°æ®çš„æ“ä½œï¼Œæˆ–è€…å½“æ“ä½œæ¯æ¬¡éƒ½éœ€è¦äº§ç”Ÿä¸åŒç»“æœæ—¶ã€‚æ­£ç¡®åœ°é€‰æ‹©ä½¿ç”¨è®¡ç®—å±æ€§è¿˜æ˜¯æ™®é€šæ–¹æ³•ï¼Œå¯ä»¥ä¼˜åŒ–ä½ çš„ Vue åº”ç”¨çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<ul>
<li>computed æ˜¯è®¡ç®—å±æ€§ï¼Œæœ‰ç¼“å­˜ï¼Œä¾èµ–å˜åŒ–æ‰ä¼šé‡æ–°è®¡ç®—</li>
<li>watch æ˜¯ç›‘å¬å™¨ï¼Œç”¨äºå“åº”æ•°æ®å˜åŒ–æ‰§è¡Œå›è°ƒ</li>
<li>computed é€‚åˆå¤šä¸ªæ•°æ®å½±å“ä¸€ä¸ªæ•°æ®çš„åœºæ™¯</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// computed ç¤ºä¾‹ï¼šè®¡ç®—æ€»ä»·</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> config </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>computed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>total</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">price</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">quantity</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li>watch é€‚åˆä¸€ä¸ªæ•°æ®å˜åŒ–å½±å“å¤šä¸ªæ•°æ®çš„åœºæ™¯</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// watch ç¤ºä¾‹ï¼šæ•°æ®å˜åŒ–æ‰§è¡Œå¤šä¸ªæ“ä½œ</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> config </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>watch</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>username</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>validateUsername</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>checkAvailability</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>updateUserProfile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newVal</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol>
<li>scoped style åŸç†:</li>
</ol>
<ul>
<li>é€šè¿‡ç»™ç»„ä»¶æ·»åŠ å”¯ä¸€çš„å±æ€§æ ‡è¯†ç¬¦(data-v-hash)</li>
<li>ç¼–è¯‘æ—¶ç»™ css é€‰æ‹©å™¨æ·»åŠ å¯¹åº”çš„å±æ€§é€‰æ‹©å™¨</li>
<li>ç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶</li>
</ul>
<ol start=5>
<li>å‚ç›´å±…ä¸­å®ç°:</li>
</ol>
<div class="language-css codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-css codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Flex æ–¹å¼ */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token selector class" style=color:#00009f>.parent</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>display</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> flex</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>align-items</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> center</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>justify-content</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> center</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Grid æ–¹å¼ */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token selector class" style=color:#00009f>.parent</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>display</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> grid</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>place-items</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> center</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* ç»å¯¹å®šä½æ–¹å¼ */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token selector class" style=color:#00009f>.child</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>position</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> absolute</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>top</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>50</span><span class="token unit">%</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>left</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>50</span><span class="token unit">%</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>transform</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>translate</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>-50</span><span class="token unit">%</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>-50</span><span class="token unit">%</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=6>
<li>flex: 1 çš„å«ä¹‰:
ç›¸å½“äºè®¾ç½®:</li>
</ol>
<div class="language-css codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-css codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token property" style=color:#36acaa>flex-grow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>flex-shrink</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>flex-basis</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token unit">%</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>è¡¨ç¤ºå…ƒç´ å¯ä»¥ä¼¸å±•å’Œæ”¶ç¼©ï¼Œå æ®å‰©ä½™ç©ºé—´</p>
<ol start=7>
<li>å•è¡Œæ–‡æœ¬çœç•¥:</li>
</ol>
<div class="language-css codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-css codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token selector class" style=color:#00009f>.ellipsis</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>white-space</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> nowrap</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>overflow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> hidden</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token property" style=color:#36acaa>text-overflow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> ellipsis</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=8>
<li>apply å’Œ call çš„åŒºåˆ«:</li>
</ol>
<ul>
<li>éƒ½æ˜¯ç”¨æ¥æ”¹å˜å‡½æ•°çš„ this æŒ‡å‘</li>
<li>call æ¥å—å‚æ•°åˆ—è¡¨</li>
<li>apply æ¥å—å‚æ•°æ•°ç»„</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token plain">fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>call</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> arg1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> arg2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>apply</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">arg1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> arg2</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=9>
<li>this æŒ‡å‘:</li>
</ol>
<ul>
<li>æ™®é€šå‡½æ•°ä¸­ï¼Œthis æŒ‡å‘è°ƒç”¨è€…</li>
<li>ç®­å¤´å‡½æ•°ä¸­ï¼Œthis æŒ‡å‘å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡</li>
<li>call/apply/bind å¯ä»¥æ”¹å˜ this æŒ‡å‘</li>
<li>æ„é€ å‡½æ•°ä¸­ï¼Œthis æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹</li>
</ul>
<ol start=10>
<li>é—­åŒ…åŠåœºæ™¯:
é—­åŒ…æ˜¯å‡½æ•°èƒ½å¤Ÿè®¿é—®å…¶å®šä¹‰æ—¶æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸ
å¸¸è§åœºæ™¯:</li>
</ol>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// æ•°æ®ç§æœ‰åŒ–</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>counter</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> count </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>add</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> count</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> count </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// å‡½æ•°æŸ¯é‡ŒåŒ–</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>curry</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">fn</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>curried</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter spread operator" style=color:#393A34>...</span><span class="token parameter">args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">args</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>apply</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter spread operator" style=color:#393A34>...</span><span class="token parameter">moreArgs</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> curried</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>apply</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> args</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>concat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">moreArgs</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=11>
<li>èŠ‚æµé˜²æŠ–:</li>
</ol>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// é˜²æŠ–: å»¶è¿Ÿæ‰§è¡Œï¼Œé‡å¤è§¦å‘é‡æ–°è®¡æ—¶</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>debounce</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> delay</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> timer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter spread operator" style=color:#393A34>...</span><span class="token parameter">args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>clearTimeout</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">timer</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    timer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>setTimeout</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>apply</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> delay</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// èŠ‚æµ: è§„å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>throttle</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style=color:#393A34>,</span><span class="token parameter"> delay</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>let</span><span class="token plain"> timer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token parameter spread operator" style=color:#393A34>...</span><span class="token parameter">args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">timer</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      timer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>setTimeout</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        fn</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>apply</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> args</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        timer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword null nil" style=color:#00009f>null</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> delay</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=12>
<li>å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡:</li>
</ol>
<ul>
<li>å®ä»»åŠ¡: setTimeout, setInterval, requestAnimationFrame</li>
<li>å¾®ä»»åŠ¡: Promise, MutationObserver, process.nextTick</li>
<li>æ‰§è¡Œé¡ºåº: åŒæ­¥ä»£ç  -> å¾®ä»»åŠ¡é˜Ÿåˆ— -> å®ä»»åŠ¡é˜Ÿåˆ—</li>
</ul>
<ol start=13>
<li>async/await:</li>
</ol>
<ul>
<li>async å‡½æ•°è¿”å› Promise</li>
<li>await ç­‰å¾… Promise å®Œæˆ</li>
<li>ç”¨åŒæ­¥çš„å†™æ³•å®ç°å¼‚æ­¥æ“ä½œ</li>
</ul>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>example</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>try</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> result </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>someAsyncOperation</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> result</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#00009f>catch</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>error</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=14>
<li>ç”Ÿæˆå™¨:</li>
</ol>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>function</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>generator</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>yield</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>yield</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> gen </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>generator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gen</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// {value: 1, done: false}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gen</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// {value: 2, done: false}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>log</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gen</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>next</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// {value: 3, done: true}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=15>
<li>TypeScript ä¸­ type å’Œ interface çš„åŒºåˆ«:</li>
</ol>
<ul>
<li>interface å¯ä»¥å£°æ˜åˆå¹¶ï¼Œtype ä¸è¡Œ</li>
<li>interface åªèƒ½å£°æ˜å¯¹è±¡ç±»å‹ï¼Œtype å¯ä»¥å£°æ˜ä»»æ„ç±»å‹</li>
<li>type å¯ä»¥ä½¿ç”¨è”åˆç±»å‹å’Œäº¤å‰ç±»å‹</li>
<li>interface å¯ä»¥ extends å’Œ implements</li>
</ul>
<div class="language-typescript codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-typescript codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// interface åˆå¹¶</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">name</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">age</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// type è”åˆç±»å‹</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> </span><span class="token class-name">Status</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'pending'</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'fulfilled'</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'rejected'</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=16>
<li>Vue å“åº”å¼åŸç†åŠ Vue2/Vue3 åŒºåˆ«:</li>
</ol>
<p><strong>å“åº”å¼å®šä¹‰</strong>ï¼š</p>
<ul>
<li>æ•°æ®çš„å˜åŒ–è‡ªåŠ¨è§¦å‘ç›¸å…³è”çš„æ›´æ–°æ“ä½œ</li>
<li>å®ç°äº†æ•°æ®ä¸è§†å›¾çš„åŒæ­¥</li>
</ul>
<p><strong>Vue2 å®ç° (Object.defineProperty)</strong>:</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token method function property-access" style=color:#d73a49>defineProperty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">obj</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'key'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ä¾èµ–æ”¶é›†</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>track</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">newValue</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    value </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> newValue</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘æ›´æ–°</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>trigger</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Vue3 å®ç° (Proxy)</strong>:</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> proxy </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Proxy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>get</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ä¾èµ–æ”¶é›†</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>track</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> target</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>set</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    target</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">key</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// è§¦å‘æ›´æ–°</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>trigger</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Vue2 å±€é™æ€§</strong>:</p>
<ul>
<li>æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤</li>
<li>æ— æ³•ç›´æ¥ç›‘å¬æ•°ç»„ç´¢å¼•å’Œé•¿åº¦å˜åŒ–</li>
<li>éœ€è¦é€’å½’éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§</li>
<li>éœ€è¦ä½¿ç”¨ Vue.set æˆ– this.$set æ·»åŠ å“åº”å¼å±æ€§</li>
</ul>
<p><strong>Vue3 ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å¯ä»¥ç›‘å¬åŠ¨æ€æ·»åŠ çš„å±æ€§</li>
<li>å¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œé•¿åº¦å˜åŒ–</li>
<li>æ”¯æŒ Mapã€Setã€WeakMapã€WeakSet</li>
<li>æ€§èƒ½æ›´å¥½ï¼Œä¸éœ€è¦åˆå§‹åŒ–æ—¶é€’å½’</li>
<li>æ›´å¥½çš„ç±»å‹æ¨å¯¼æ”¯æŒ</li>
</ul>
<p><strong>å®é™…åº”ç”¨ç¤ºä¾‹</strong>:</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>// Vue2 çš„å±€é™</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> vm </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token class-name">Vue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>data</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token literal-property property" style=color:#36acaa>items</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'a'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'b'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'x'</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¸ä¼šè§¦å‘å“åº”</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">vm</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// ä¸ä¼šè§¦å‘å“åº”</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Vue3 çš„ä¼˜åŠ¿</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> proxy </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token literal-property property" style=color:#36acaa>items</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'a'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'b'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">proxy</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'x'</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// å¯ä»¥è§¦å‘å“åº”</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">proxy</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">items</span><span class="token punctuation" style=color:#393A34>.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// å¯ä»¥è§¦å‘å“åº”</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p2-provide-inject>Provide inject<a href=#p2-provide-inject class=hash-link aria-label="Provide injectçš„ç›´æ¥é“¾æ¥" title="Provide injectçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>Vue 3 ä¸­çš„ <code>provide</code> å’Œ <code>inject</code> åŠŸèƒ½æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå…è®¸ç¥–å…ˆç»„ä»¶å°†æ•°æ®â€œæä¾›â€ç»™å®ƒçš„æ‰€æœ‰åä»£ç»„ä»¶ï¼Œæ— è®ºåä»£ç»„ä»¶ä½äºç»„ä»¶æ ‘çš„ä½•å¤„ï¼Œè€Œä¸å¿…é€šè¿‡æ‰€æœ‰çš„ç»„ä»¶å±‚å±‚ä¼ é€’å±æ€§ï¼ˆpropsï¼‰ã€‚è¿™å¯¹äºæ·±å±‚åµŒå¥—çš„ç»„ä»¶æˆ–è·¨å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>åŸºæœ¬ç”¨æ³•</p>
<p>åœ¨ç¥–å…ˆç»„ä»¶ä¸­æä¾›æ•°æ®</p>
<p>ä½ å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨ <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ã€‚<code>provide</code> é€‰é¡¹åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è¿”å›å¯¹è±¡çš„å‡½æ•°ï¼Œå…¶ä¸­çš„æ¯ä¸ªå±æ€§éƒ½å¯ä»¥è¢«å­ç»„ä»¶æ³¨å…¥ã€‚ä» Vue 3 å¼€å§‹ï¼Œ<code>provide</code> å’Œ <code>inject</code> ç»‘å®šç°åœ¨æ˜¯å“åº”å¼çš„ã€‚</p>
<p>åœ¨ Vue 3 ä¸­ï¼Œå»ºè®®åœ¨ <code>setup()</code> å‡½æ•°ä¸­ä½¿ç”¨ <code>provide</code> å‡½æ•°ï¼Œå› ä¸º <code>setup</code> æ˜¯ç»„åˆå¼ API çš„å…¥å£ç‚¹ã€‚</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> provide </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword module" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>default</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>setup</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// æä¾› 'theme' æ•°æ®</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>provide</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'theme'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'dark'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>åœ¨åä»£ç»„ä»¶ä¸­æ³¨å…¥æ•°æ®</p>
<p>åä»£ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>inject</code> é€‰é¡¹æ¥æ¥æ”¶æ•°æ®ã€‚<code>inject</code> é€‰é¡¹åº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ—å‡ºéœ€è¦æ³¨å…¥çš„å±æ€§åã€‚</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> inject </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword module" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>default</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>setup</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> theme </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>inject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'theme'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword control-flow" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> theme </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>æ¡ˆä¾‹</p>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œè¯¥åº”ç”¨æœ‰ä¸€ä¸ªä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨é¡¶å±‚ç»„ä»¶ä¸­æä¾›å½“å‰ä¸»é¢˜ï¼Œè€Œæ‰€æœ‰å­ç»„ä»¶éƒ½å¯ä»¥æ³¨å…¥è¿™ä¸ªä¸»é¢˜ä¿¡æ¯ï¼Œè€Œä¸å¿…é€šè¿‡å±‚å±‚ä¼ é€’ã€‚</p>
<p>å“åº”å¼æä¾›</p>
<p>å¦‚æœè¦æä¾›çš„æ•°æ®æ˜¯å“åº”å¼çš„ï¼Œå¹¶ä¸”å¸Œæœ›åä»£ç»„ä»¶èƒ½å¤Ÿå“åº”æ•°æ®çš„å˜åŒ–ï¼Œä½ éœ€è¦ä½¿ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿå‡½æ•°ï¼Œä¾‹å¦‚ <code>reactive</code> æˆ– <code>ref</code>ã€‚</p>
<div class="language-js codeBlockContainer_Db7k theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_vfrs><pre tabindex=0 class="prism-code language-js codeBlock_fMk5 thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_Z2T1><span class=token-line style=color:#393A34><span class="token keyword module" style=color:#00009f>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#393A34>{</span><span class="token imports"> provide</span><span class="token imports punctuation" style=color:#393A34>,</span><span class="token imports"> reactive </span><span class="token imports punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'vue'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword module" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#00009f>default</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>setup</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> theme </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>reactive</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#36acaa>color</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'dark'</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>provide</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'theme'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> theme</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_XqHc><button type=button aria-label=å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ title=å¤åˆ¶ class=clean-btn><span class=copyButtonIcons_FbLT aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_Vt0T><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_dUyb><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>åä»£ç»„ä»¶åŒæ ·å¯ä»¥å¦‚ä¸Šæ‰€ç¤ºé€šè¿‡ <code>inject</code> è·å–è¿™ä¸ªå“åº”å¼çš„æ•°æ®ã€‚</p>
<p>æ³¨æ„äº‹é¡¹</p>
<ul>
<li><code>provide</code> å’Œ <code>inject</code> æä¾›çš„ä¾èµ–å…³ç³»ä¸æ˜¯å¯é çš„ï¼Œå¹¶ä¸”ä¸åº”è¯¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­é¢‘ç¹ä½¿ç”¨ï¼Œä»¥é¿å…å¤æ‚çš„è·¨ç»„ä»¶é€šè®¯å¯¼è‡´åº”ç”¨éš¾ä»¥ç»´æŠ¤ã€‚å®ƒé€šå¸¸è¢«ç”¨äºå¼€å‘å¯å¤ç”¨çš„æ’ä»¶æˆ–é«˜é˜¶ç»„ä»¶ã€‚</li>
<li>ä½¿ç”¨è¿™ä¸¤ä¸ªé€‰é¡¹æ—¶ï¼Œæ³¨å…¥çš„æ•°æ®åœ¨åä»£ç»„ä»¶ä¸­å¹¶ä¸æ˜¯å“åº”å¼çš„ï¼Œé™¤éä½¿ç”¨äº† Vue çš„å“åº”å¼ç³»ç»Ÿï¼ˆå¦‚ <code>reactive</code>ã€<code>ref</code>ï¼‰æ¥æä¾›è¿™äº›æ•°æ®ã€‚</li>
<li>å¦‚æœ <code>inject</code> æœªæ‰¾åˆ°æä¾›çš„é”®ï¼Œåˆ™å®ƒé»˜è®¤è¿”å› <code>undefined</code>ã€‚ä½ å¯ä»¥é€šè¿‡æä¾›ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºé»˜è®¤å€¼æ¥æ”¹å˜è¿™ä¸€è¡Œä¸ºã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>provide</code> å’Œ <code>inject</code> æ˜¯ Vue 3 ä¸­è§£å†³è·¨å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€é—®é¢˜çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå°¤å…¶é€‚ç”¨äºå¼€å‘é«˜é˜¶ç»„ä»¶æˆ–æ’ä»¶æ—¶ä½¿ç”¨ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p2-wactheffect>watchEffect<a href=#p2-wactheffect class=hash-link aria-label=watchEffectçš„ç›´æ¥é“¾æ¥ title=watchEffectçš„ç›´æ¥é“¾æ¥>â€‹</a></h2>
<h2 class="anchor anchorWithStickyNavbar_a6yo" id=p2-watch-and-watcheffect>watch å’Œ watchEffect åœºæ™¯ä¸Šæœ‰ä½•åŒºåˆ«<a href=#p2-watch-and-watcheffect class=hash-link aria-label="watch å’Œ watchEffect åœºæ™¯ä¸Šæœ‰ä½•åŒºåˆ«çš„ç›´æ¥é“¾æ¥" title="watch å’Œ watchEffect åœºæ™¯ä¸Šæœ‰ä½•åŒºåˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><code>watch</code> å’Œ <code>watchEffect</code> åœ¨ Vue 3 ä¸­éƒ½æ˜¯å¼ºå¤§çš„å“åº”å¼ç‰¹æ€§ï¼Œç”¨äºä¾¦å¬å“åº”å¼çŠ¶æ€çš„å˜åŒ–å¹¶æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨ï¼ˆå¦‚è°ƒç”¨å‡½æ•°ï¼‰ã€‚è™½ç„¶å®ƒä»¬å¾ˆç›¸ä¼¼ï¼Œä½†åœ¨ä½¿ç”¨åœºæ™¯å’Œè¡Œä¸ºä¸Šæœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ï¼Œäº†è§£è¿™äº›åŒºåˆ«å¯ä»¥å¸®åŠ©ä½ é€‰æ‹©æœ€åˆé€‚çš„å·¥å…·æ¥å®ç°ä½ çš„éœ€æ±‚ã€‚</p>
<p>watch</p>
<ul>
<li><strong>ç²¾ç¡®æ€§</strong>ï¼š<code>watch</code> å…è®¸ä½ æ˜ç¡®æŒ‡å®šè¦ä¾¦å¬çš„æ•°æ®æºï¼Œå¹¶ä¸”å¯ä»¥åˆ†åˆ«è®¿é—®å…¶æ–°å€¼å’Œæ—§å€¼ã€‚è¿™è®© <code>watch</code> åœ¨éœ€è¦å¯¹ç‰¹å®šæ•°æ®å˜åŒ–åšå‡ºå“åº”æ—¶éå¸¸ç²¾ç¡®å’Œçµæ´»ã€‚</li>
<li><strong>æƒ°æ€§æ‰§è¡Œ</strong>ï¼š<code>watch</code> é»˜è®¤æƒ…å†µä¸‹æ˜¯æƒ°æ€§æ‰§è¡Œçš„ï¼Œå³å®ƒéœ€è¦æ•°æ®å‘ç”Ÿå˜åŒ–åæ‰æ‰§è¡Œå›è°ƒã€‚è¿™æ„å‘³ç€åœ¨åˆå§‹åŒ–æ—¶ï¼Œ<code>watch</code> çš„å›è°ƒä¸ä¼šæ‰§è¡Œï¼Œé™¤éä½ é€šè¿‡é…ç½®ä½¿å…¶ç«‹å³æ‰§è¡Œã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ éœ€è¦æ˜ç¡®çŸ¥é“æ•°æ®ä½•æ—¶æ”¹å˜ä»¥åŠå¦‚ä½•æ”¹å˜æ—¶ï¼ˆä¾‹å¦‚å¯¹æ¯”æ–°æ—§å€¼ï¼‰ï¼Œæˆ–è€…éœ€è¦ä¾¦å¬ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šçš„å“åº”å¼å¼•ç”¨æ—¶ï¼Œ<code>watch</code> æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li>
</ul>
<p>watchEffect</p>
<ul>
<li><strong>è‡ªåŠ¨ä¾¦æµ‹</strong>ï¼š<code>watchEffect</code> ä¼šè‡ªåŠ¨ä¾¦æµ‹å…¶å›è°ƒå‡½æ•°ä¸­ç”¨åˆ°çš„å“åº”å¼çŠ¶æ€ï¼Œå¹¶åœ¨è¿™äº›çŠ¶æ€æ”¹å˜æ—¶é‡æ–°æ‰§è¡Œã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦æ˜ç¡®æŒ‡å®šä¾¦å¬çš„çŠ¶æ€ï¼Œè®©ä¾¦å¬å‰¯ä½œç”¨çš„ç¼–å†™æ›´ç®€å•ç›´æ¥ã€‚</li>
<li><strong>ç«‹å³æ‰§è¡Œ</strong>ï¼š<code>watchEffect</code> å›è°ƒä¼šåœ¨åˆå§‹æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åå†æ¯æ¬¡ä¾èµ–çš„å“åº”å¼çŠ¶æ€å˜åŒ–æ—¶å†æ¬¡æ‰§è¡Œã€‚è¿™é€‚åˆäºä¸éœ€è¦åˆå§‹æ¡ä»¶åˆ¤æ–­ä¸”å¸Œæœ›ç«‹å³æ ¹æ®å“åº”å¼çŠ¶æ€æ¸²æŸ“æˆ–æ‰§è¡Œé€»è¾‘çš„åœºæ™¯ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ éœ€è¦è‡ªåŠ¨è¿½è¸ªå¹¶å“åº”æ‰€æœ‰ä½¿ç”¨åˆ°çš„å“åº”å¼çŠ¶æ€å˜åŒ–æ—¶ï¼Œ<code>watchEffect</code> æ˜¯æ›´ä¾¿æ·çš„é€‰é¡¹ã€‚å®ƒé€‚ç”¨äºä¾èµ–é¡¹ä¸æ˜ç¡®æˆ–è€…å¸Œæœ›è‡ªåŠ¨è¿½è¸ªä¾èµ–å¹¶æ‰§è¡Œå‰¯ä½œç”¨çš„åœºåˆã€‚</li>
</ul>
<p>å¦‚ä½•é€‰æ‹©</p>
<ol>
<li><strong>å¦‚æœä½ çš„å‰¯ä½œç”¨é€»è¾‘éœ€è¦æ˜ç¡®ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶ä¸”éœ€è¦åŒºåˆ†åˆå§‹æ‰§è¡Œå’Œä¾èµ–æ›´æ–°æ—¶çš„é€»è¾‘</strong>ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>watch</code> æ›´åˆé€‚ã€‚<code>watch</code> æä¾›äº†å¯¹ä¾¦å¬æ•°æ®å’Œæ‰§è¡Œé€»è¾‘çš„ç»†ç²’åº¦æ§åˆ¶ã€‚</li>
<li><strong>å¦‚æœä½ çš„é€»è¾‘åªæ˜¯å•çº¯åœ°éœ€è¦å¯¹ä½¿ç”¨åˆ°çš„ä»»ä½•å“åº”å¼çŠ¶æ€çš„æ”¹å˜åšå‡ºå“åº”ï¼Œä¸”å¸Œæœ›ç®€åŒ–ä¾èµ–è·Ÿè¸ª</strong>ï¼Œ<code>watchEffect</code> æ›´ç®€å•ã€æ›´æ˜“äºä½¿ç”¨ã€‚å®ƒè‡ªåŠ¨æ”¶é›†ä¾èµ–é¡¹ï¼Œç®€åŒ–äº†ä»£ç ï¼Œä½¿ä½ çš„å‰¯ä½œç”¨é€»è¾‘æ›´å®¹æ˜“ç¼–å†™å’Œç»´æŠ¤ã€‚</li>
</ol>
<p>é€šå¸¸ï¼Œé€‰æ‹©ä¾èµ–äºä½ æƒ³è¦çš„æ§åˆ¶çº§åˆ«å’Œç‰¹å®šçš„ä½¿ç”¨æƒ…å†µã€‚<code>watch</code> æä¾›äº†æ›´é«˜çš„çµæ´»æ€§å’Œæ§åˆ¶åŠ›ï¼Œ<code>watchEffect</code> åˆ™ä¸ºå¸¸è§çš„è‡ªåŠ¨å“åº”é€»è¾‘æä¾›äº†ä¾¿åˆ©ã€‚äº†è§£è¿™äº›åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯å¯ä»¥å¸®åŠ©ä½ æ›´åˆç†åœ°ä½¿ç”¨ Vue 3 çš„å“åº”å¼ç³»ç»Ÿã€‚</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=æ–‡ä»¶é€‰é¡¹å¡><a class="pagination-nav__link pagination-nav__link--prev" href=/web-interview/docs/vue/component><div class=pagination-nav__sublabel>ä¸Šä¸€é¡µ</div><div class=pagination-nav__label>ç»„ä»¶</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/web-interview/docs/vue/tool><div class=pagination-nav__sublabel>ä¸‹ä¸€é¡µ</div><div class=pagination-nav__label>å·¥å…·é“¾</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_H33e thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#p0-vue3-reactivity class="table-of-contents__link toc-highlight">vue3 çš„å“åº”å¼åº“æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œå®ƒå•ç‹¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ä»€ä¹ˆæ•ˆæœ</a><li><a href=#p1-data class="table-of-contents__link toc-highlight">data</a><li><a href=#p1-ref-reactive class="table-of-contents__link toc-highlight">ref å’Œ reactive æœ‰ä½•åŒºåˆ«å—</a><li><a href=#p0-computed-watch class="table-of-contents__link toc-highlight">computed å’Œ watch çš„åŒºåˆ«</a><li><a href=#p2-provide-inject class="table-of-contents__link toc-highlight">Provide inject</a><li><a href=#p2-wactheffect class="table-of-contents__link toc-highlight">watchEffect</a><li><a href=#p2-watch-and-watcheffect class="table-of-contents__link toc-highlight">watch å’Œ watchEffect åœºæ™¯ä¸Šæœ‰ä½•åŒºåˆ«</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright Â© 2025 Web Interview, Inc. Built with ZenHeart.</div></div></div></footer></div>